{"ast":null,"code":"var _jsxFileName = \"/Users/matt/Development/gravie-software-engineer-challenge/src/containers/Body.js\";\nimport React, { Component, Fragment } from 'react';\nimport { GIANT_BOMB } from '../constants';\nimport GameTiles from '../components/GameTiles';\nimport { Pagination, Grid, Segment, Icon } from 'semantic-ui-react';\n\nclass Body extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      games: [],\n      images: [],\n      search: '',\n      loading: false,\n      searched: false\n    };\n\n    this.addGame = event => {\n      let name = event.target.parentElement.children[2].innerText;\n      let image = event.target.parentElement.firstElementChild.src;\n      this.props.addToCart(name, image);\n    };\n\n    this.handleChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.checkEnter = e => {\n      let key = e.key;\n\n      if (key === 'Enter') {\n        let search = this.state.search;\n        this.handleFetch(search);\n      }\n    };\n\n    this.handleFetch = search => {\n      this.setState({\n        loading: true,\n        searched: true\n      });\n      let terms;\n      typeof search === 'object' ? terms = this.state.search : terms = search;\n      this.setState({\n        games: [],\n        images: []\n      });\n      const proxyurl = `https://cors-anywhere.herokuapp.com/`;\n      const url = `https://www.giantbomb.com/api/search/?api_key=${GIANT_BOMB}&format=json&query=${terms.toLowerCase()}&resources=game`;\n      fetch(proxyurl + url) // .then(res => res.json())\n      // .then(data => this.setState({gameData: data}))\n      .then(res => res.json()).then(data => {\n        let newGames = data.results.map(game => game.name);\n        let images = data.results.map(game => game.image.medium_url);\n        this.setState({\n          games: [...newGames],\n          images: [...images],\n          loading: false\n        });\n      });\n    };\n\n    this.scroll = target => {\n      let direction = target.className.includes('right') ? 0 : this.state.games.length - 1;\n      let newGames = this.state.games;\n      let gameToMove = newGames.splice(direction, 1)[0];\n      let newImages = this.state.images;\n      let imageToMove = newImages.splice(direction, 1)[0];\n      direction === 0 ? newGames.push(gameToMove) && newImages.push(imageToMove) : newGames.unshift(gameToMove) && newImages.unshift(imageToMove);\n      this.setState({\n        games: newGames,\n        images: newImages\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.displayCart === true) {\n      this.setState({\n        games: this.props.cart,\n        images: this.props.cartImg\n      });\n    }\n  }\n\n  render() {\n    let length;\n    this.state.games ? length = this.state.games.length : length = 0;\n    let searched = this.state.searched;\n    let primary = (length * 4.99).toFixed(2);\n    let tax = (Math.round(primary * .08025 * 100) / 100).toFixed(2);\n    let total = parseFloat(primary) + parseFloat(tax);\n    let date = new Date().getDate();\n    let month = new Date().getMonth() + 1; //Current Month\n\n    let year = new Date().getFullYear();\n    date += 7;\n\n    if (date > 30 && [4, 6, 9, 11].includes(month)) {\n      date -= 30;\n      month += 1;\n    } else if (date > 28 && month === 2) {\n      year % 4 === 0 ? date -= 29 : date -= 28;\n      month += 1;\n    } else if (date > 31) {\n      date -= 31;\n      month += 1;\n    }\n\n    if (month > 12) {\n      year += 1;\n      month = 1;\n    }\n\n    let calendarDay = `${month}/${date}/${year}`;\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, this.props.displayCart === true ? null : React.createElement(\"div\", {\n      style: {\n        marginBottom: '3em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      id: \"searchbar\",\n      name: \"search\",\n      value: this.state.search,\n      onChange: this.handleChange,\n      onKeyDown: this.checkEnter,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"button\",\n      id: \"search\",\n      value: \"Search\",\n      onClick: this.handleFetch,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    })), length > 0 && !this.props.displayCart === true ? React.createElement(\"p\", {\n      style: {\n        minWidth: '100%',\n        textAlign: 'end',\n        marginBottom: 0,\n        paddingRight: '2em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, `${length} results`) : null, length > 0 && this.props.displayCart === true ? React.createElement(\"p\", {\n      style: {\n        minWidth: '100%',\n        textAlign: 'end',\n        marginBottom: 0,\n        paddingRight: '2em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, `${length} items in cart`) : null, React.createElement(\"div\", {\n      id: \"gamesBanner\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, this.state.loading ? React.createElement(Icon, {\n      loading: true,\n      name: \"spinner\",\n      size: \"big\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }) : null, length > 0 ? React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      style: {\n        visibility: !this.state.games && length === 0 ? 'hidden' : 'visible',\n        alignItems: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      style: {\n        visibility: !this.state.games && length === 0 ? 'hidden' : 'visible',\n        borderRadius: '2em',\n        padding: '0.2em'\n      },\n      className: \"scrollIcon l\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"angle double left\",\n      size: \"big\",\n      onClick: e => this.scroll(e.target),\n      style: {\n        visibility: !this.state.games && length === 0 ? 'hidden' : 'visible'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })), React.createElement(Grid.Row, {\n      columns: 2,\n      only: \"mobile\",\n      style: {\n        alignItems: 'center',\n        maxWidth: '76%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 1,\n      tColumns: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 2,\n      tColumns: 2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })))), React.createElement(Grid.Row, {\n      columns: 4,\n      only: \"computer\",\n      style: {\n        alignItems: 'center',\n        maxWidth: '76%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 1,\n      tColumns: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 2,\n      tColumns: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 3,\n      tColumns: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 4,\n      tColumns: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    })))), React.createElement(Grid.Row, {\n      columns: 3,\n      only: \"tablet\",\n      style: {\n        alignItems: 'center',\n        maxWidth: '76%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 1,\n      tColumns: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 2,\n      tColumns: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }))), React.createElement(Grid.Column, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      style: {\n        backgroundColor: '#282c34'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }, React.createElement(GameTiles, {\n      games: this.state.games,\n      images: this.state.images,\n      displayCart: this.props.displayCart,\n      remove: this.props.remove,\n      addGame: this.props.addGame,\n      cart: this.props.cart,\n      column: 3,\n      tColumns: 3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })))), React.createElement(\"button\", {\n      style: {\n        visibility: !this.state.games && length === 0 ? 'hidden' : 'visible',\n        borderRadius: '2em',\n        padding: '0.2em'\n      },\n      className: \"scrollIcon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"angle double right\",\n      size: \"big\",\n      onClick: e => this.scroll(e.target),\n      style: {\n        visibility: !this.state.games && length === 0 ? 'hidden' : 'visible',\n        paddingLeft: '0.15em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }))), React.createElement(Pagination, {\n      defaultActivePage: 1,\n      firstItem: null,\n      lastItem: null,\n      pointing: true,\n      secondary: true,\n      totalPages: 3 // style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible'}}\n      ,\n      style: {\n        visibility: 'hidden'\n      },\n      id: \"pagination\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    })) : null, length === 0 && searched && !this.state.loading ? React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, \"No Results Found\") : null, this.props.displayCart === true && length === 0 ? React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, \"No Items in Cart\") : this.props.displayCart === true && length > 0 ? React.createElement(\"div\", {\n      style: {\n        maxWidth: '60%',\n        marginLeft: '40%',\n        marginRight: '20%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258\n      },\n      __self: this\n    }, React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      style: {\n        lineHeight: '2em',\n        margin: '0.15em'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      style: {\n        float: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, `${length} games at $4.99 each: `), React.createElement(\"span\", {\n      style: {\n        float: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, primary), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        float: 'left'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264\n      },\n      __self: this\n    }, `Tax (8.025%)`), React.createElement(\"span\", {\n      style: {\n        float: 'right'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, tax), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(\"hr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        float: 'right',\n        maxWidth: '40%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268\n      },\n      __self: this\n    }, total), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, `Your rental period will end ${calendarDay}`))) : null));\n  }\n\n}\n\nexport default Body;","map":{"version":3,"sources":["/Users/matt/Development/gravie-software-engineer-challenge/src/containers/Body.js"],"names":["React","Component","Fragment","GIANT_BOMB","GameTiles","Pagination","Grid","Segment","Icon","Body","state","games","images","search","loading","searched","addGame","event","name","target","parentElement","children","innerText","image","firstElementChild","src","props","addToCart","handleChange","setState","value","checkEnter","e","key","handleFetch","terms","proxyurl","url","toLowerCase","fetch","then","res","json","data","newGames","results","map","game","medium_url","scroll","direction","className","includes","length","gameToMove","splice","newImages","imageToMove","push","unshift","componentDidMount","displayCart","cart","cartImg","render","primary","toFixed","tax","Math","round","total","parseFloat","date","Date","getDate","month","getMonth","year","getFullYear","calendarDay","marginBottom","minWidth","textAlign","paddingRight","visibility","alignItems","borderRadius","padding","maxWidth","backgroundColor","remove","paddingLeft","marginLeft","marginRight","lineHeight","margin","float"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from 'react'\n\nimport { GIANT_BOMB } from '../constants'\nimport GameTiles from '../components/GameTiles'\nimport { Pagination, Grid, Segment, Icon } from 'semantic-ui-react'\n\nclass Body extends Component {\n  state = {\n    games: [],\n    images: [],\n    search: '',\n    loading: false,\n    searched: false\n  }\n\n  addGame = (event) => {\n    let name = event.target.parentElement.children[2].innerText\n    let image = event.target.parentElement.firstElementChild.src\n\n    this.props.addToCart(name, image)\n  }\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value\n    })\n  }\n\n  checkEnter = (e) => {\n    let key = e.key\n    if (key === 'Enter') {\n      let search = this.state.search\n      this.handleFetch(search)\n    }\n  }\n\n  handleFetch = (search) => {\n    this.setState({loading: true, searched: true})\n    let terms\n    typeof(search) === 'object' ? terms = this.state.search\n    :\n    terms = search\n\n    this.setState({\n      games: [],\n      images: []\n    })\n\n    const proxyurl = `https://cors-anywhere.herokuapp.com/`\n    const url = `https://www.giantbomb.com/api/search/?api_key=${GIANT_BOMB}&format=json&query=${terms.toLowerCase()}&resources=game`\n\n    fetch(proxyurl + url)\n    // .then(res => res.json())\n    // .then(data => this.setState({gameData: data}))\n    .then(res => res.json())\n    .then(data => {\n      let newGames = data.results.map(game => game.name)\n      let images = data.results.map(game => game.image.medium_url)\n\n      this.setState({\n        games: [...newGames],\n        images: [...images],\n        loading: false\n      })\n    })\n  }\n\n  componentDidMount() {\n    if (this.props.displayCart === true) {\n        this.setState({\n          games: this.props.cart,\n          images: this.props.cartImg\n        })\n    }\n  }\n\n  scroll = (target) => {\n    let direction = target.className.includes('right') ? 0 : this.state.games.length-1\n\n    let newGames = this.state.games\n    let gameToMove = newGames.splice(direction, 1)[0]\n\n    let newImages = this.state.images\n    let imageToMove = newImages.splice(direction, 1)[0]\n\n    direction === 0 ? newGames.push(gameToMove) && newImages.push(imageToMove) :  newGames.unshift(gameToMove) && newImages.unshift(imageToMove)\n\n    this.setState({\n      games: newGames,\n      images: newImages\n    })\n  }\n\n  render() {\n    let length\n    this.state.games ? length = this.state.games.length : length = 0\n    let searched = this.state.searched\n\n    let primary = (length*4.99).toFixed(2)\n    let tax = (Math.round(primary*.08025 * 100) / 100).toFixed(2)\n\n    let total = parseFloat(primary) + parseFloat(tax)\n\n    let date = new Date().getDate();\n    let month = new Date().getMonth() + 1; //Current Month\n    let year = new Date().getFullYear();\n\n    date += 7\n\n    if (date > 30 && [4, 6, 9, 11].includes(month)) {\n      date -= 30\n      month += 1\n    } else if (date > 28 && month === 2) {\n      year % 4 === 0 ? date -= 29 : date -= 28\n      month += 1\n    } else if (date > 31) {\n      date -= 31\n      month += 1\n    }\n\n    if (month > 12) {\n      year += 1\n      month = 1\n    }\n\n    let calendarDay = `${month}/${date}/${year}`\n\n    return (\n      <Fragment>\n        {\n          this.props.displayCart === true ?\n            null\n          :\n\n          <div style={{marginBottom: '3em'}}>\n            <input type='text' id='searchbar' name='search' value={this.state.search} onChange={this.handleChange} onKeyDown={this.checkEnter} />\n            <input type='button' id='search' value='Search' onClick={this.handleFetch} />\n          </div>\n        }\n        {\n          length > 0 && !this.props.displayCart === true ? <p style={{minWidth: '100%', textAlign: 'end', marginBottom: 0,\n          paddingRight: '2em'}}>{`${length} results`}</p>\n          :\n            null\n        }\n        {\n          length > 0 && this.props.displayCart === true ? <p style={{minWidth: '100%', textAlign: 'end', marginBottom: 0,\n          paddingRight: '2em'}}>{`${length} items in cart`}</p>\n          :\n            null\n        }\n\n        <div id='gamesBanner'>\n          {\n            this.state.loading ?\n              <Icon loading name='spinner' size='big' /> : null\n          }\n          {\n            length > 0 ? <Fragment>\n              <Grid style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible', alignItems: 'center',}}>\n\n                <button style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible', borderRadius: '2em', padding: '0.2em'}} className='scrollIcon l'>\n                  <Icon name='angle double left' size='big'\n                    onClick={(e) => this.scroll(e.target)} style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible'}} />\n                </button>\n\n                <Grid.Row columns={2} only='mobile' style={{alignItems: 'center', maxWidth: '76%'}}>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={1} tColumns={2} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={2} tColumns={2} />\n                    </Segment>\n                  </Grid.Column>\n                </Grid.Row>\n\n\n                <Grid.Row columns={4} only='computer' style={{alignItems: 'center', maxWidth: '76%'}}>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images} displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={1} tColumns={4} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={2} tColumns={4} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={3} tColumns={4} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images} displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={4} tColumns={4} />\n                    </Segment>\n\n                  </Grid.Column>\n                </Grid.Row>\n                <Grid.Row columns={3} only='tablet' style={{alignItems: 'center', maxWidth: '76%'}}>\n                  <Grid.Column>\n\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={1} tColumns={3} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={2} tColumns={3} />\n                    </Segment>\n                  </Grid.Column>\n                  <Grid.Column>\n                    <Segment style={{backgroundColor: '#282c34'}}>\n                      <GameTiles games={this.state.games} images={this.state.images}  displayCart={this.props.displayCart} remove={this.props.remove} addGame={this.props.addGame} cart={this.props.cart} column={3} tColumns={3} />\n                    </Segment>\n\n                  </Grid.Column>\n                </Grid.Row>\n\n                <button style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible', borderRadius: '2em', padding: '0.2em'}} className='scrollIcon'>\n                  <Icon name='angle double right' size='big'\n                    onClick={(e) => this.scroll(e.target)}\n                    style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible', paddingLeft: '0.15em'}} />\n                </button>\n\n              </Grid>\n\n              <Pagination\n                defaultActivePage={1}\n                firstItem={null}\n                lastItem={null}\n                pointing\n                secondary\n                totalPages={3}\n                // style={{visibility: !this.state.games && length === 0 ? 'hidden' : 'visible'}}\n                style={{visibility: 'hidden'}}\n                id='pagination'\n              />\n            </Fragment>\n            :\n            null\n          }\n          {\n            length === 0 && searched && !this.state.loading ?\n              <h2>No Results Found</h2>\n            :\n              null\n          }\n          {\n            this.props.displayCart === true && length === 0 ?\n              <h2>No Items in Cart</h2>\n            :\n            this.props.displayCart === true && length > 0 ?\n              <div style={{maxWidth: '60%', marginLeft: '40%', marginRight: '20%'}}>\n                <hr />\n                <p style={{lineHeight: '2em', margin: '0.15em'}}>\n                  <span style={{float: 'left'}}>{`${length} games at $4.99 each: `}</span>\n                  <span style={{float: 'right'}}>{primary}</span>\n                  <br />\n                  <span style={{float: 'left'}}>{`Tax (8.025%)`}</span>\n                  <span style={{float: 'right'}}>{tax}</span>\n                  <br />\n                  <hr />\n                  <span style={{float: 'right', maxWidth: '40%'}}>\n                    {total}\n                  </span>\n                  <br />\n                  <span>{`Your rental period will end ${calendarDay}`}</span>\n                </p>\n              </div>\n            :\n            null\n          }\n        </div>\n      </Fragment>\n    );\n  }\n\n}\n\nexport default Body\n"]},"metadata":{},"sourceType":"module"}